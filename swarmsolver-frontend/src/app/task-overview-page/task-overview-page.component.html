
<app-table-card *ngIf="task$ | async as tasks">
  <app-table-header [title]="'Tasks'" [subTitle]="'Add Tasks, manage and more.'">
    <div class="inline-flex gap-x-2">
      <!-- switch workspace -->
      <select (change)="onSelectWorkSpace($event)" class="py-3 px-4 pe-9 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:placeholder-neutral-500 dark:focus:ring-neutral-600">
        <option selected="">Select workspace</option>
        <option *ngFor="let workSpace of workSpaces()" [selected]="workSpace === selectedWorkSpace()">{{workSpace}}</option>
      </select>

      <!-- filters -->
      <!--
      <a class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-slate-900 dark:border-gray-700 dark:text-white dark:hover:bg-gray-800 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600" href="#">
        View all
      </a>
      -->

      <!-- add button -->
      <a (click)="addClicked()" class="py-2 px-3 inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:pointer-events-none dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600" href="javascript:void(0);">
        <svg class="flex-shrink-0 size-3" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path d="M2.63452 7.50001L13.6345 7.5M8.13452 13V2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        Create
      </a>
    </div>

  </app-table-header>
  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
    <thead class="bg-gray-50 dark:bg-neutral-800">
    <tr>
      <th scope="col" class="px-6 py-3 text-start text-xs font-medium text-gray-500 uppercase">Task</th>
      <th scope="col" class="px-6 py-3 text-end text-xs font-medium text-gray-500 uppercase">Action</th>
    </tr>
    </thead>
    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
      @for (task of tasks; track $index) {
        <tr>
          <td class="size-px whitespace-nowrap">
            <a (click)="openClicked($event, task)" class="block relative z-10" href="#">
              <div class="px-6 py-2">
                <div class="block text-sm text-blue-600 decoration-2 hover:underline dark:text-blue-500">{{task.title}}</div>
              </div>
            </a>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-end text-sm font-medium">
            <button type="button"
                    class="inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent text-blue-600 hover:text-blue-800 disabled:opacity-50 disabled:pointer-events-none dark:text-blue-500 dark:hover:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"
                    (click)="onEdit($event, task)"
            >
              Edit
            </button>
            |
            <button type="button"
                    class="inline-flex items-center gap-x-2 text-sm font-semibold rounded-lg border border-transparent text-blue-600 hover:text-blue-800 disabled:opacity-50 disabled:pointer-events-none dark:text-blue-500 dark:hover:text-blue-400 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"
                    (click)="deleteClicked($event, task)"
            >
              Delete
            </button>
          </td>
        </tr>
      }
    </tbody>
  </table>
</app-table-card>

<jw-modal [id]="taskDialogId()">
  <app-task-dialog [spec]="taskDialogSpec"></app-task-dialog>
</jw-modal>

<jw-modal [id]="deleteTaskDialogId()">
  <app-confirmation-dialog [spec]="confirmDeleteSpec"></app-confirmation-dialog>
</jw-modal>
